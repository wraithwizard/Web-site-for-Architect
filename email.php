<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/img/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="css/normalizer.css">
    <link href="https://fonts.googleapis.com/css2?family=Goldman:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=PT+Sans+Narrow&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/contact-styles.css">   
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">    
    <title>Arq. Diego Chávez - Contacto</title>
</head>

<body>      
    <main>     
        <div class="barra video">
            <div class="overlay">
                <video class="contact-video" muted loop autoplay preload>
                    <source src="img/contact.mp4" type="video/mp4">
                </video>

                <div class="video__text video--txt">
                    <h2><span class="logo__bold">CONTACTO</span></h2>                 
                </div>

                <div class="barra__contactos">
                    <!-- Facebook -->
                    <a href="https://www.facebook.com/arquitecto.diego.chavez" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-facebook myClass" width="36" height="36" viewBox="0 0 24 24" stroke-width="1" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3" />
                    </svg></a>
                    <!-- Instagram -->
                    <a href="https://www.instagram.com/el_curandero_de_casas/" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-instagram myClass" width="36" height="36" viewBox="0 0 24 24" stroke-width="1" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                        <rect x="4" y="4" width="16" height="16" rx="4" />
                        <circle cx="12" cy="12" r="3" />
                        <line x1="16.5" y1="7.5" x2="16.5" y2="7.501" />
                    </svg></a>
                    <!-- Twitter -->
                    <a href="https://twitter.com/dscm1965" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter myClass" width="36" height="36" viewBox="0 0 24 24" stroke-width="1" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                        <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
                    </svg></a>
                    <!-- Whatsapp -->
                    <a href="https://wa.me/529842323945" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-whatsapp myClass" width="36" height="36" viewBox="0 0 24 24" stroke-width="1" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" />
                        <path d="M9 10a0.5 .5 0 0 0 1 0v-1a0.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a0.5 .5 0 0 0 0 -1h-1a0.5 .5 0 0 0 0 1" />
                    </svg></a>    

                        <div class="foot__contact">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-phone" width="36" height="36" viewBox="0 0 24 24" stroke-width="1" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2" />
                            </svg><p>phone number</p>  
                        </div>

                        <div class="foot__contact">            
                            <a href="mailto:diegochavez@arquitectoadomicilio.com"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-mail" width="36" height="36" viewBox="0 0 24 24" stroke-width="1" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="3" y="5" width="18" height="14" rx="2" />
                            <polyline points="3 7 12 13 21 7" /></svg><p>diegochavez@arquitectoadomicilio.com</a></p>
                        </div>  
                </div>

                <!-- BURGER TIME -->
                <div class="main-nav">
                    <ul class="nav-links">               
                        <li><a class="link" href="index.html">HOME</a></li><hr>
                        <li><a class="link" href="portofolio.html">PORTOFOLIO</a></li><hr>      
                        <li><a class="link" href="acerca.html">QUIENES SOMOS</a></li><hr>     
                        <li><a class="link" href="blog/index.php">BLOG</a></li><hr>       
                        <li><a class="link" href="email.php">CONTACTO</a></li><hr> 
                    </ul>
                            <!-- burger -->
                    <div class="burger" id="burger">
                        <div class="line line1"></div>
                        <div class="line line2"></div>
                        <div class="line line3"></div>
                    </div>
                </div>     
                
                <form class="formulario"  method="post" id="formulario">             
                    <h3 class="form__title">Envía un mensaje</h3>
                    <div class="mb-3">
                        <label for="nombre" class="form-label">Nombre</label>
                        <input type="text" class="form-control" name="nombre" required>  
                        <label for="apellido" class="form-label">Apellido</label>
                        <input type="text" class="form-control" name="apellido">      
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" name="email" required>  
                        <label for="message" class="form-label">Mensaje</label>  
                        <textarea class="form-control text-area" rows="5" name="message" required></textarea>
                    </div>                 
                    <button type="submit" class="btn btn-primary btn-lg col-6 ">Enviar</button>
                </form>

                <div class="foot barra__contactos">        
                    <p>2022 &copy; Arquitecto Diego Chávez</p>
                </div>  
            </div>     
        </div>    
    </main>
  
    <script src="js/Burger.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script> 
    <script src="js/emailer.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>
</html>

<?php
use PHPMailer\PHPMailer\PHPMailer;
use PHPMailer\PHPMailer\Exception;
use PHPMailer\PHPMailer\SMTP;

require 'PHPMailer/Exception.php';
require 'PHPMailer/PHPMailer.php';
require 'PHPMailer/SMTP.php';

if (isset($_POST["email"]) && $_POST["email"] != ""){
    $nombre = $_POST["nombre"];
    $apellido = $_POST["apellido"];
    $email = $_POST["email"];
    $mensaje = $_POST["message"];
    $subject = "Contacto desde página web";

    //Create an instance; passing `true` enables exceptions
    $mail = new PHPMailer(true);

    try {
        //Server settings
        $mail->SMTPDebug = 0;                   //Enable verbose debug output
        $mail->isSMTP();                                            //Send using SMTP
        $mail->Host       = 'the host';                       //Set the SMTP server to send through
        $mail->SMTPAuth   = true;                                   //Enable SMTP authentication

        //habria que cambiar estos datos y permitir acceso a aplicaciones poco seguras en la seguridad de la cuenta
        $mail->Username   = 'username';            //SMTP username
        $mail->Password   = 'password';                          //SMTP password

        $mail->SMTPSecure = PHPMailer::ENCRYPTION_SMTPS;            //Enable implicit TLS encryption
        $mail->Port       = 465;                                    //TCP port to connect to; use 587 if you have set `SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS`

        //Recipientes necesarios
        $mail->setFrom('diegochavez@arquitectoadomicilio.com', utf8_decode($subject));
        $mail->addReplyTo(utf8_decode($email), utf8_decode($nombre), utf8_decode($apellido));
        $mail->addAddress('diegochavez@arquitectoadomicilio.com');             //hacia donde va el mensaje
     
        //Content
        $mail->isHTML(true);                                  //Set email format to HTML
        $mail->Subject = 'Mensaje desde arquitectoadomicilio.com';
        $mail->Body    = 'Nombre: ' .utf8_decode($nombre) .'<br>Apellido: ' .utf8_decode($apellido) .'<br>Email: ' .$email.'<br><br>' .utf8_decode($mensaje);

        $sent = $mail->send();
        if (!$sent) {
             //alerts  
            echo json_encode('exito');
        }else{
             echo json_encode('error');
        }      
    } catch (Exception $e) {
               
    }
}